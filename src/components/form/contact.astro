---
// Contact Form Component
const theme = Astro.props.theme;
---

<section data-theme={theme} class={theme === 'bamboosky-creme' ? 'bamboosky-border' : 'bg-primary'}>

  <form
    name="contact"
    method="POST"
    data-netlify="true"
    data-netlify-honeypot="bot-field"
    class=""
  >

    <input type="hidden" name="form-name" value="contact" />
    
    <!-- Honeypot field for spam protection -->
    <div class="hidden">
      <label>Don't fill this out if you're human:
        <input name="bot-field" />
      </label>
    </div>

    <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4">
      <!--<legend class="fieldset-legend uppercase">Get in Touch</legend>-->

      <h3 class="text-lg font-bold mb-4 uppercase">Get in Touch</h3>

      <label class="label">Name</label>
      <input type="text" name="name" class="input w-full" placeholder="Name" required />

      <label class="label">Email</label>
      <input type="email" name="email" class="input w-full" placeholder="Email" required />

      <label class="label">Subject</label>
      <select name="subject" class="select w-full">
        <option disabled selected>Choose a subject</option>
        <option>General</option>
        <option>Reservation</option>
        <option>Private Hire</option>
        <option>Event</option>
        <option>Wedding</option>
      </select>

      <label class="label">Message</label>
      <textarea name="message" class="textarea w-full" placeholder="Message" required></textarea>

      <button class="btn btn-neutral mt-4 uppercase">Send Message</button>
    </fieldset>

    <!-- Success message (hidden by default) -->
    <div id="success-message" class="alert alert-success mt-4 hidden">
      <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
      <span>Thank you for your message! We'll get back to you soon.</span>
    </div>

  </form>

</section>

<script>
  // Handle form submission
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form[name="contact"]') as HTMLFormElement;
    const successMessage = document.getElementById('success-message');
    
    if (form) {
      form.addEventListener('submit', function(e) {
        // Let Netlify handle the form submission
        // Show success message after a short delay
        setTimeout(() => {
          if (successMessage) {
            successMessage.classList.remove('hidden');
            form.style.display = 'none';
          }
        }, 1000);
      });
    }
  });
</script>